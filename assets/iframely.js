/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

eval("var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * Iramely oembed scripts\n */\nvar __ = wp.i18n.__;\nvar createHigherOrderComponent = wp.compose.createHigherOrderComponent;\nvar Fragment = wp.element.Fragment;\nvar InspectorControls = wp.blockEditor.InspectorControls;\nvar PanelBody = wp.components.PanelBody;\n\nvar iEvent = new RegExp(\"setIframelyEmbedOptions\");\n\nfunction sleep(milliseconds) {\n    var start = new Date().getTime();\n    for (var i = 0; i < 1e7; i++) {\n        if (new Date().getTime() - start > milliseconds) {\n            break;\n        }\n    }\n}\n\nfunction findIframeByContentWindow(iframes, contentWindow) {\n    var foundIframe = void 0;\n    for (var i = 0; i < iframes.length && !foundIframe; i++) {\n        var iframe = iframes[i];\n        if (iframe.contentWindow === contentWindow) {\n            foundIframe = iframe;\n        }\n    }\n    return foundIframe;\n}\n\niframely.on('options-changed', function (id, formContainer, query) {\n    // block options interaction\n    var clientId = id.split(\"div#block-\")[1],\n        blockAttrs = wp.data.select('core/block-editor').getBlockAttributes(clientId),\n        url = blockAttrs.url,\n        iframely_key = '&iframely=';\n\n    // Parse url and make sure we are replacing an url query string properly\n    if (url.indexOf('iframely=') > 0) {\n        var durl = url.split('iframely=')[0];\n        url = durl.substr(0, durl.length - 1);\n    }\n    if (url.indexOf('?') === -1) {\n        iframely_key = '?iframely=';\n    }\n\n    query.timestamp = new Date().getTime();\n    // Join the url string with iframely params\n    var params = iframely_key + encodeURIComponent(window.btoa(JSON.stringify(query)));\n    var newUrl = url + params;\n    wp.data.dispatch('core/block-editor').updateBlockAttributes([clientId], { url: newUrl });\n});\n\nfunction initListener() {\n    window.addEventListener(\"message\", function (e) {\n        var frames = document.getElementsByTagName(\"iframe\");\n        if (iEvent.test(e.data)) {\n            var iframe = findIframeByContentWindow(frames, e.source);\n            $(iframe).data(JSON.parse(e.data));\n        }\n    }, false);\n}\ninitListener();\n\nvar IframelyOptions = function (_React$Component) {\n    _inherits(IframelyOptions, _React$Component);\n\n    function IframelyOptions() {\n        _classCallCheck(this, IframelyOptions);\n\n        return _possibleConstructorReturn(this, (IframelyOptions.__proto__ || Object.getPrototypeOf(IframelyOptions)).apply(this, arguments));\n    }\n\n    _createClass(IframelyOptions, [{\n        key: \"renderForm\",\n        value: function renderForm(clientId) {\n            // Rendering form for options in the Inspector\n            var selector = 'div#block-' + clientId;\n            var options = $(selector).find('iframe').data();\n            if (options) {\n                iframely.buildOptionsForm(selector, $('div#ifopts').get(0), options.data);\n            }\n        }\n    }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n            this.renderForm(this.props.data);\n        }\n    }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate() {\n            this.renderForm(this.props.data);\n        }\n    }, {\n        key: \"render\",\n        value: function render() {\n            return wp.element.createElement(\n                \"div\",\n                { id: \"ifopts\", \"data-id\": this.props.data },\n                this.body\n            );\n        }\n    }]);\n\n    return IframelyOptions;\n}(React.Component);\n\nIframelyOptions.defaultProps = {\n    body: '',\n    data: ''\n};\n\nvar withInspectorControls = createHigherOrderComponent(function (BlockEdit) {\n    return function (props) {\n        if (props.isSelected === true && (props.name === \"core/embed\" || props.name.startsWith(\"core-embed\"))) {\n            return wp.element.createElement(\n                Fragment,\n                null,\n                wp.element.createElement(BlockEdit, props),\n                wp.element.createElement(\n                    InspectorControls,\n                    null,\n                    wp.element.createElement(\n                        PanelBody,\n                        null,\n                        wp.element.createElement(IframelyOptions, { data: props.clientId })\n                    )\n                )\n            );\n        } else {\n            return wp.element.createElement(\n                Fragment,\n                null,\n                wp.element.createElement(BlockEdit, props)\n            );\n        }\n    };\n}, \"withInspectorControl\");\n\nwp.hooks.addFilter('editor.BlockEdit', 'iframely/with-inspector-controls', withInspectorControls);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/OTU1MiJdLCJuYW1lcyI6WyJfXyIsIndwIiwiaTE4biIsImNyZWF0ZUhpZ2hlck9yZGVyQ29tcG9uZW50IiwiY29tcG9zZSIsIkZyYWdtZW50IiwiZWxlbWVudCIsIkluc3BlY3RvckNvbnRyb2xzIiwiYmxvY2tFZGl0b3IiLCJQYW5lbEJvZHkiLCJjb21wb25lbnRzIiwiaUV2ZW50IiwiUmVnRXhwIiwic2xlZXAiLCJtaWxsaXNlY29uZHMiLCJzdGFydCIsIkRhdGUiLCJnZXRUaW1lIiwiaSIsImZpbmRJZnJhbWVCeUNvbnRlbnRXaW5kb3ciLCJpZnJhbWVzIiwiY29udGVudFdpbmRvdyIsImZvdW5kSWZyYW1lIiwibGVuZ3RoIiwiaWZyYW1lIiwiaWZyYW1lbHkiLCJvbiIsImlkIiwiZm9ybUNvbnRhaW5lciIsInF1ZXJ5IiwiY2xpZW50SWQiLCJzcGxpdCIsImJsb2NrQXR0cnMiLCJkYXRhIiwic2VsZWN0IiwiZ2V0QmxvY2tBdHRyaWJ1dGVzIiwidXJsIiwiaWZyYW1lbHlfa2V5IiwiaW5kZXhPZiIsImR1cmwiLCJzdWJzdHIiLCJ0aW1lc3RhbXAiLCJwYXJhbXMiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ3aW5kb3ciLCJidG9hIiwiSlNPTiIsInN0cmluZ2lmeSIsIm5ld1VybCIsImRpc3BhdGNoIiwidXBkYXRlQmxvY2tBdHRyaWJ1dGVzIiwiaW5pdExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJmcmFtZXMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidGVzdCIsInNvdXJjZSIsIiQiLCJwYXJzZSIsIklmcmFtZWx5T3B0aW9ucyIsInNlbGVjdG9yIiwib3B0aW9ucyIsImZpbmQiLCJidWlsZE9wdGlvbnNGb3JtIiwiZ2V0IiwicmVuZGVyRm9ybSIsInByb3BzIiwiYm9keSIsIlJlYWN0IiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIiwid2l0aEluc3BlY3RvckNvbnRyb2xzIiwiQmxvY2tFZGl0IiwiaXNTZWxlY3RlZCIsIm5hbWUiLCJzdGFydHNXaXRoIiwiaG9va3MiLCJhZGRGaWx0ZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7OztJQUdRQSxFLEdBQU9DLEdBQUdDLEksQ0FBVkYsRTtJQUNBRywwQixHQUErQkYsR0FBR0csTyxDQUFsQ0QsMEI7SUFDQUUsUSxHQUFhSixHQUFHSyxPLENBQWhCRCxRO0lBQ0FFLGlCLEdBQXNCTixHQUFHTyxXLENBQXpCRCxpQjtJQUNBRSxTLEdBQWNSLEdBQUdTLFUsQ0FBakJELFM7O0FBQ1IsSUFBTUUsU0FBUyxJQUFJQyxNQUFKLENBQVcseUJBQVgsQ0FBZjs7QUFFQSxTQUFTQyxLQUFULENBQWVDLFlBQWYsRUFBNkI7QUFDekIsUUFBSUMsUUFBUSxJQUFJQyxJQUFKLEdBQVdDLE9BQVgsRUFBWjtBQUNBLFNBQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJLEdBQXBCLEVBQXlCQSxHQUF6QixFQUE4QjtBQUMxQixZQUFLLElBQUlGLElBQUosR0FBV0MsT0FBWCxLQUF1QkYsS0FBeEIsR0FBaUNELFlBQXJDLEVBQWtEO0FBQzlDO0FBQ0g7QUFDSjtBQUNKOztBQUVELFNBQVNLLHlCQUFULENBQW1DQyxPQUFuQyxFQUE0Q0MsYUFBNUMsRUFBMkQ7QUFDdkQsUUFBSUMsb0JBQUo7QUFDQSxTQUFJLElBQUlKLElBQUksQ0FBWixFQUFlQSxJQUFJRSxRQUFRRyxNQUFaLElBQXNCLENBQUNELFdBQXRDLEVBQW1ESixHQUFuRCxFQUF3RDtBQUNwRCxZQUFJTSxTQUFTSixRQUFRRixDQUFSLENBQWI7QUFDQSxZQUFJTSxPQUFPSCxhQUFQLEtBQXlCQSxhQUE3QixFQUE0QztBQUN4Q0MsMEJBQWNFLE1BQWQ7QUFDSDtBQUNKO0FBQ0QsV0FBT0YsV0FBUDtBQUNIOztBQUVERyxTQUFTQyxFQUFULENBQVksaUJBQVosRUFBK0IsVUFBU0MsRUFBVCxFQUFhQyxhQUFiLEVBQTRCQyxLQUE1QixFQUFtQztBQUM5RDtBQUNBLFFB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LEtBQTRCUCxNQUFNUSxJQUFOLEtBQWUsWUFBZixJQUErQlIsTUFBTVEsSUFBTixDQUFXQyxVQUFYLENBQXNCLFlBQXRCLENBQTNELENBQUosRUFBcUc7QUFDakcsbUJBQ0k7QUFBQyx3QkFBRDtBQUFBO0FBQ0kseUNBQUMsU0FBRCxFQUFnQlQsS0FBaEIsQ0FESjtBQUVJO0FBQUMscUNBQUQ7QUFBQTtBQUNJO0FBQUMsaUNBQUQ7QUFBQTtBQUNJLGlEQUFDLGVBQUQsSUFBaUIsTUFBT0EsTUFBTXRDLFFBQTlCO0FBREo7QUFESjtBQUZKLGFBREo7QUFVSCxTQVhELE1BV087QUFDSCxtQkFBUTtBQUFDLHdCQUFEO0FBQUE7QUFBVSx5Q0FBQyxTQUFELEVBQWdCc0MsS0FBaEI7QUFBVixhQUFSO0FBQ0g7QUFDSixLQWZEO0FBZ0JILENBakI4QixFQWlCNUIsc0JBakI0QixDQUEvQjs7QUFtQkFuRSxHQUFHNkUsS0FBSCxDQUFTQyxTQUFULENBQW9CLGtCQUFwQixFQUF3QyxrQ0FBeEMsRUFBNEVOLHFCQUE1RSIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBJcmFtZWx5IG9lbWJlZCBzY3JpcHRzXG4gKi9cbmNvbnN0IHsgX18gfSA9IHdwLmkxOG47XG5jb25zdCB7IGNyZWF0ZUhpZ2hlck9yZGVyQ29tcG9uZW50IH0gPSB3cC5jb21wb3NlO1xuY29uc3QgeyBGcmFnbWVudCB9ID0gd3AuZWxlbWVudDtcbmNvbnN0IHsgSW5zcGVjdG9yQ29udHJvbHMgfSA9IHdwLmJsb2NrRWRpdG9yO1xuY29uc3QgeyBQYW5lbEJvZHkgfSA9IHdwLmNvbXBvbmVudHM7XG5jb25zdCBpRXZlbnQgPSBuZXcgUmVnRXhwKFwic2V0SWZyYW1lbHlFbWJlZE9wdGlvbnNcIik7XG5cbmZ1bmN0aW9uIHNsZWVwKG1pbGxpc2Vjb25kcykge1xuICAgIHZhciBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMWU3OyBpKyspIHtcbiAgICAgICAgaWYgKChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0KSA+IG1pbGxpc2Vjb25kcyl7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZmluZElmcmFtZUJ5Q29udGVudFdpbmRvdyhpZnJhbWVzLCBjb250ZW50V2luZG93KSB7XG4gICAgbGV0IGZvdW5kSWZyYW1lO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBpZnJhbWVzLmxlbmd0aCAmJiAhZm91bmRJZnJhbWU7IGkrKykge1xuICAgICAgICBsZXQgaWZyYW1lID0gaWZyYW1lc1tpXTtcbiAgICAgICAgaWYgKGlmcmFtZS5jb250ZW50V2luZG93ID09PSBjb250ZW50V2luZG93KSB7XG4gICAgICAgICAgICBmb3VuZElmcmFtZSA9IGlmcmFtZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZm91bmRJZnJhbWU7XG59XG5cbmlmcmFtZWx5Lm9uKCdvcHRpb25zLWNoYW5nZWQnLCBmdW5jdGlvbihpZCwgZm9ybUNvbnRhaW5lciwgcXVlcnkpIHtcbiAgICAvLyBibG9jayBvcHRpb25zIGludGVyYWN0aW9uXG4gICAgbGV0IGNsaWVudElkID0gaWQuc3BsaXQoXCJkaXYjYmxvY2stXCIpWzFdLFxuICAgICAgICBibG9ja0F0dHJzID0gd3AuZGF0YS5zZWxlY3QoJ2NvcmUvYmxvY2stZWRpdG9yJykuZ2V0QmxvY2tBdHRyaWJ1dGVzKGNsaWVudElkKSxcbiAgICAgICAgdXJsID0gYmxvY2tBdHRycy51cmwsXG4gICAgICAgIGlmcmFtZWx5X2tleSA9ICcmaWZyYW1lbHk9JztcblxuICAgIC8vIFBhcnNlIHVybCBhbmQgbWFrZSBzdXJlIHdlIGFyZSByZXBsYWNpbmcgYW4gdXJsIHF1ZXJ5IHN0cmluZyBwcm9wZXJseVxuICAgIGlmKHVybC5pbmRleE9mKCdpZnJhbWVseT0nKSA+IDApIHtcbiAgICAgICAgbGV0IGR1cmwgPSB1cmwuc3BsaXQoJ2lmcmFtZWx5PScpWzBdO1xuICAgICAgICB1cmwgPSBkdXJsLnN1YnN0cigwLCBkdXJsLmxlbmd0aC0xKTtcbiAgICB9XG4gICAgaWYodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEpIHtcbiAgICAgICAgaWZyYW1lbHlfa2V5ID0gJz9pZnJhbWVseT0nO1xuICAgIH1cblxuICAgIHF1ZXJ5LnRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIC8vIEpvaW4gdGhlIHVybCBzdHJpbmcgd2l0aCBpZnJhbWVseSBwYXJhbXNcbiAgICBsZXQgcGFyYW1zID0gaWZyYW1lbHlfa2V5ICsgZW5jb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5idG9hKEpTT04uc3RyaW5naWZ5KHF1ZXJ5KSkpO1xuICAgIGxldCBuZXdVcmwgPSB1cmwgKyBwYXJhbXM7XG4gICAgd3AuZGF0YS5kaXNwYXRjaCgnY29yZS9ibG9jay1lZGl0b3InKS51cGRhdGVCbG9ja0F0dHJpYnV0ZXMoW2NsaWVudElkXSwgeyB1cmw6IG5ld1VybCB9KTtcblxufSk7XG5cbmZ1bmN0aW9uIGluaXRMaXN0ZW5lcigpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixmdW5jdGlvbihlKXtcbiAgICAgICAgbGV0IGZyYW1lcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaWZyYW1lXCIpO1xuICAgICAgICBpZihpRXZlbnQudGVzdChlLmRhdGEpKSB7XG4gICAgICAgICAgICBsZXQgaWZyYW1lID0gZmluZElmcmFtZUJ5Q29udGVudFdpbmRvdyhmcmFtZXMsIGUuc291cmNlKTtcbiAgICAgICAgICAgICQoaWZyYW1lKS5kYXRhKEpTT04ucGFyc2UoZS5kYXRhKSk7XG4gICAgICAgIH1cbiAgICB9LGZhbHNlKTtcbn1cbmluaXRMaXN0ZW5lcigpO1xuXG5jbGFzcyBJZnJhbWVseU9wdGlvbnMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG4gICAgcmVuZGVyRm9ybShjbGllbnRJZCkge1xuICAgICAgICAvLyBSZW5kZXJpbmcgZm9ybSBmb3Igb3B0aW9ucyBpbiB0aGUgSW5zcGVjdG9yXG4gICAgICAgIGxldCBzZWxlY3RvciA9ICdkaXYjYmxvY2stJyArIGNsaWVudElkO1xuICAgICAgICBsZXQgb3B0aW9ucyA9ICQoc2VsZWN0b3IpLmZpbmQoJ2lmcmFtZScpLmRhdGEoKTtcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmcmFtZWx5LmJ1aWxkT3B0aW9uc0Zvcm0oc2VsZWN0b3IsICQoJ2RpdiNpZm9wdHMnKS5nZXQoMCksIG9wdGlvbnMuZGF0YSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICB0aGlzLnJlbmRlckZvcm0odGhpcy5wcm9wcy5kYXRhKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyRm9ybSh0aGlzLnByb3BzLmRhdGEpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIDxkaXYgaWQ9XCJpZm9wdHNcIiBkYXRhLWlkPXsgdGhpcy5wcm9wcy5kYXRhIH0+eyB0aGlzLmJvZHkgfTwvZGl2PjtcbiAgICB9XG5cbn1cblxuSWZyYW1lbHlPcHRpb25zLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBib2R5OiAnJyxcbiAgICBkYXRhOiAnJyxcbn07XG5cbmNvbnN0IHdpdGhJbnNwZWN0b3JDb250cm9scyA9ICBjcmVhdGVIaWdoZXJPcmRlckNvbXBvbmVudCggKCBCbG9ja0VkaXQgKSA9PiB7XG4gICAgcmV0dXJuICggcHJvcHMgKSA9PiB7XG4gICAgICAgIGlmIChwcm9wcy5pc1NlbGVjdGVkPT09dHJ1ZSAmJiAocHJvcHMubmFtZSA9PT0gXCJjb3JlL2VtYmVkXCIgfHwgcHJvcHMubmFtZS5zdGFydHNXaXRoKFwiY29yZS1lbWJlZFwiKSkpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPEZyYWdtZW50PlxuICAgICAgICAgICAgICAgICAgICA8QmxvY2tFZGl0IHsgLi4ucHJvcHMgfSAvPlxuICAgICAgICAgICAgICAgICAgICA8SW5zcGVjdG9yQ29udHJvbHM+XG4gICAgICAgICAgICAgICAgICAgICAgICA8UGFuZWxCb2R5ID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWZyYW1lbHlPcHRpb25zIGRhdGE9eyBwcm9wcy5jbGllbnRJZCB9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvUGFuZWxCb2R5PlxuICAgICAgICAgICAgICAgICAgICA8L0luc3BlY3RvckNvbnRyb2xzPlxuICAgICAgICAgICAgICAgIDwvRnJhZ21lbnQ+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICg8RnJhZ21lbnQ+PEJsb2NrRWRpdCB7IC4uLnByb3BzIH0gLz48L0ZyYWdtZW50Pik7XG4gICAgICAgIH1cbiAgICB9O1xufSwgXCJ3aXRoSW5zcGVjdG9yQ29udHJvbFwiICk7XG5cbndwLmhvb2tzLmFkZEZpbHRlciggJ2VkaXRvci5CbG9ja0VkaXQnLCAnaWZyYW1lbHkvd2l0aC1pbnNwZWN0b3ItY29udHJvbHMnLCB3aXRoSW5zcGVjdG9yQ29udHJvbHMgKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ })
/******/ ]);